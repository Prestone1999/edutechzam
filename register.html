<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Register</title>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css">
   <link rel="stylesheet" href="css/style.css">
</head>
<body class="auth-page">

<section class="form-container">
   <form action="" method="post" enctype="multipart/form-data" id="registerForm">
      <h3><img src="/images/logo2.png" height="100px" width="100px"></h3>
      <h3>Create your eduTechzam account</h3>
      
      <div class="input-group">
         <input type="text" name="name" placeholder="Enter your full name" required maxlength="50" class="box" id="name">
         <i class="fas fa-user"></i>
      </div>
      
      <div class="input-group">
         <input type="email" name="email" placeholder="Enter your email" required maxlength="50" class="box" id="email">
         <i class="fas fa-envelope"></i>
      </div>
      
      <div class="input-group">
         <input type="password" name="pass" placeholder="Enter your password" required maxlength="20" class="box" id="password">
         <i class="fas fa-lock"></i>
         <button type="button" class="password-toggle" onclick="togglePassword('password')">
            <i class="fas fa-eye"></i>
         </button>
      </div>
      <div class="password-strength" id="passwordStrength"></div>
      
      <div class="input-group">
         <input type="password" name="c_pass" placeholder="Confirm your password" required maxlength="20" class="box" id="confirmPassword">
         <i class="fas fa-lock"></i>
         <button type="button" class="password-toggle" onclick="togglePassword('confirmPassword')">
            <i class="fas fa-eye"></i>
         </button>
      </div>
      <div class="password-strength" id="confirmPasswordStrength"></div>
      
      <div class="input-group">
         <select name="user_type" id="userType" class="box" required>
            <option value="" disabled selected>-- Select user type</option>
            <option value="student">Student</option>
            <option value="teacher">Teacher</option>
            <option value="admin">admin</option>
         </select>
         <i class="fas fa-user-tag"></i>
      </div>
      
      <div class="terms-checkbox">
         <input type="checkbox" id="terms" required>
         <label for="terms">
            I agree to the <a href="#" onclick="showTerms()">Terms of Service</a> and <a href="#" onclick="showPrivacy()">Privacy Policy</a>
         </label>
      </div>
      
      <input type="submit" value="Create Account" name="submit" class="btn">
      <a href="index.html" class="btn option-btn">Back Home</a>
      
      <div class="form-divider">
         <span>or continue with</span>
      </div>
      
      <div class="social-login">
         <a href="#" class="social-btn">
            <i class="fab fa-google"></i> Google
         </a>
         <a href="#" class="social-btn">
            <i class="fab fa-facebook-f"></i> Facebook
         </a>
      </div>
      
      <p>Already have an account? <a href="login.html">Login now</a></p>
   </form>
</section>

<!-- Terms Modal -->
<div id="termsModal" class="modal-overlay">
   <div class="modal-content">
      <div class="modal-header">
         <h3>Terms of Service</h3>
         <button class="modal-close-btn" onclick="closeTerms()">&times;</button>
      </div>
      <div class="modal-body">
         <p>By using eduTechzam, you agree to:</p>
         <ul>
            <li>Provide accurate and complete information</li>
            <li>Maintain the security of your account</li>
            <li>Use the platform for educational purposes only</li>
            <li>Respect other users and their privacy</li>
            <li>Not share inappropriate or harmful content</li>
         </ul>
      </div>
      <button class="btn" onclick="closeTerms()">I Understand</button>
   </div>
</div>

<!-- Privacy Modal -->
<div id="privacyModal" class="modal-overlay">
   <div class="modal-content">
      <div class="modal-header">
         <h3>Privacy Policy</h3>
         <button class="modal-close-btn" onclick="closePrivacy()">&times;</button>
      </div>
      <div class="modal-body">
         <p>We collect and use your information to:</p>
         <ul>
            <li>Provide and improve our educational services</li>
            <li>Communicate with you about your account</li>
            <li>Ensure platform security and prevent fraud</li>
            <li>Comply with legal obligations</li>
         </ul>
         <p>We never sell your personal information to third parties.</p>
      </div>
      <button class="btn" onclick="closePrivacy()">I Understand</button>
   </div>
</div>

<!-- Check if user is already logged in -->
<script>
document.addEventListener('DOMContentLoaded', function() {
   const currentUser = JSON.parse(localStorage.getItem('currentUser') || 'null');
   if (currentUser) {
      // User is already logged in, redirect to appropriate dashboard
      if (currentUser.userType === 'student') {
         window.location.href = 'home.html';
      } else if (currentUser.userType === 'teacher') {
         window.location.href = 'teacher_home.html';
      } else if (currentUser.userType === 'admin') {
         window.location.href = 'admin_dash.html';
      }
   }
});
</script>

<script src="js/script.js"></script>
<script>
// Handle registration form submission
function handleRegistration(event) {
   event.preventDefault();
   
   const name = document.getElementById('name').value.trim();
   const email = document.getElementById('email').value.trim();
   const password = document.getElementById('password').value;
   const confirmPassword = document.getElementById('confirmPassword').value;
   const userType = document.getElementById('userType').value;
   
   // Basic validation
   if (password !== confirmPassword) {
      alert('Passwords do not match');
      return false;
   }
   
   // Get existing users or initialize empty array
   const users = JSON.parse(localStorage.getItem('users') || '[]');
   
   // Check if user already exists
   if (users.some(user => user.email === email)) {
      alert('A user with this email already exists');
      return false;
   }
   
   // Create new user object
   const newUser = {
      id: Date.now().toString(),
      name: name,
      email: email,
      pass: password, // In a real app, this should be hashed
      user_type: userType,
      created_at: new Date().toISOString(),
      status: 'active'
   };
   
   // Add new user to users array
   users.push(newUser);
   
   // Save updated users array to localStorage
   localStorage.setItem('users', JSON.stringify(users));
   
   alert(`Successfully created ${userType} account for ${name}`);
   
   // Redirect to appropriate dashboard based on user type
   if (userType === 'admin') {
      window.location.href = 'admin_dash.html';
   } else if (userType === 'teacher') {
      window.location.href = 'teacher_home.html';
   } else {
      window.location.href = 'home.html';
   }
   
   return false;
}
</script>
</body>
</html> 